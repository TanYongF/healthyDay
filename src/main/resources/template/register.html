
<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>主页</title>
	<!-- CSS  -->
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<link rel="stylesheet" href="https://kauizhaotan.oss-cn-shanghai.aliyuncs.com/VotingSystem/css/materialize.min.css" type="text/css">
	<link rel="stylesheet" href="/css/me.css" type="text/css">
	<script type="text/javascript" src="https://kauizhaotan.oss-cn-shanghai.aliyuncs.com/VotingSystem/js/jquery.js" charset="UTF-8"></script>
	<script type="text/javascript" src="https://kauizhaotan.oss-cn-shanghai.aliyuncs.com/VotingSystem/js/materialize.min.js" charset="UTF-8"></script>


</head>
<!--TODO:完成注册页面（仿照登陆页面）-->
<body class="bg">
<div th:replace="common :: navbar(2)"></div>
<!--注册-->
<!--主体开始-->
<div class="container login-container" style="flex: 1 0 auto; width: 90%">
	<div class="row section  ">
		<div class="col s12 l12">
			<div class="card horizontal large cyan lighten-5" style="height: 700px; background-color: rgba(255,255,255,0.5)" >
						<span class="card-title" id="channelTitleSpan" style=" background-color: rgba(0,0,0,0)" >
						</span>
				<div class="card-stacked">
					<div class="card-content center">
						<div class="section">
							<div class="col s12 l12">
								<div class="row section">
									<h3 class="title left-align  center" style="font-weight: 900">注册</h3>
								</div>
								<form id="registerForm" method="post" name="loginForm" style="width:50%; margin:0 auto">
									<div class="row">
										<div class="input-field col s12">
											<i class="material-icons prefix">account_circle</i>
											<input id="username" type="text"  class="validate" name="username" value="">
											<label for="username">用户名</label>
										</div>
									</div>
									<div class="row">
										<div class="input-field col s12">
											<i class="material-icons prefix">account_circle</i>
											<input id="mobile" type="text"  class="validate" name="mobile" value="">
											<label for="mobile">手机号</label>
										</div>
									</div>
									<div class="row">
										<div class="input-field col s12">
											<i class="material-icons prefix">vpn_key</i>
											<input id="password" type="password"  class="validate" name="password" value="">
											<label for="password">密码</label>
										</div>
									</div>
									<div class="row">
										<div class="col-md-5">
											<button class="btn btn-primary btn-block" onclick="reset()" type="reset">重置</button>
										</div>
									</div>
									<div class="col-md-5">
										<!--更改布局-->
										<div class="section row">
											<div class="center-align">
												<input name="_csrf" type="hidden" value="93edbebc-aa90-4b8c-b372-28f922a9a9e6"/>
												<button class="btn-large waves-effect waves-light pulse" onclick="register()" type="submit">注册</button>
											</div>
										</div>
									</div>
								</form>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!--结束-->


	</div>
	<!--主体结束-->

	<div th:replace="common::footer"></div>

	<!--参考的是投票系统-->
	<script>
			function register() {
				$("#registerForm").validate({
					submitHandler: function (form) {
						doRegister();
					}
				});
			}

			function doRegister() {
				g_showLoading();

				var inputPass = $("#password").val();
				var salt = g_passsword_salt;
				var str = "" + salt.charAt(0) + salt.charAt(2) + inputPass + salt.charAt(5) + salt.charAt(4);
				var password = md5(str);

				$.ajax({
					url: "/login/do_login",
					type: "POST",
					data: {
						username:$("#username").val(),
						mobile: $("#mobile").val(),
						password: password
					},
					success: function (data) {
						layer.closeAll();
						if (data.code == 0) {
							layer.msg("成功");
							// window.location.href = "/goods/to_list";
						} else {
							layer.msg(data.msg);
						}
					},
					error: function () {
						layer.closeAll();
					}
				});
			}
		</script>

</body>
</html>
